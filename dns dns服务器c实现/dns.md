<!-- TOC -->

- [dns服务器](#dns服务器)
    - [什么是DNS](#什么是dns)
    - [常用查询模式](#常用查询模式)
    - [DNS查询与通讯原理](#dns查询与通讯原理)
        - [查询模式-递归式](#查询模式-递归式)
        - [查询模式-迭代式](#查询模式-迭代式)
    - [DNS协议](#dns协议)
        - [参考链接](#参考链接)
        - [DNS协议报文格式](#dns协议报文格式)

<!-- /TOC -->
# dns服务器

## 什么是DNS

- DNS（Domain Name System，域名系统），万维网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。通过域名，最终得到该域名对应的IP地址的过程叫做域名解析（或主机名解析）。

- DNS协议运行在UDP协议之上，使用端口号53。

## 常用查询模式

- nslookup, 显示dns服务器的ip； 然后输入域名进行查询，如果DNS服务正常，就能够正常返回ip

## DNS查询与通讯原理

DNS分为Client和Server，Client扮演发问的角色，也就是问Server一个Domain Name，而Server必须要回答此Domain Name的真正IP地址。而当地的DNS先会查自己的资料库。如果自己的资料库没有，则会往该DNS上所设的DNS服务器询问，依此得到答案之后，将收到的答案存起来，并回答客户。  

### 查询模式-递归式

递归式(Recursive):DNS客户端向DNS Server的查询模式，这种方式是将要查询的封包送出去问，就等待正确名称的正确响应，这种方式只处理响应回来的封包是否是正确响应或是说是找不到该名称的错误讯息。  

### 查询模式-迭代式

迭代式(Iterative):DNS Server间的查询模式，由Client端或是DNS Server上所发出去问，这种方式送封包出去问，所响应回来的资料不一定是最后正确的名称位置，但也不是如上所说的响应回来是错误讯息，他响应回来的是部分信息，告诉你所查询域名中的下一级域的域名服务器的地址信息，然后再到此域名服务器上去查询所要解析的名称，反复动作直到找到最终信息。  

## DNS协议

### 参考链接

### DNS协议报文格式

- DNS协议详解及报文格式分析: <https://blog.csdn.net/tianxuhong/article/details/74922454>
- DNS协议学习与实现: <https://www.cnblogs.com/dongkuo/p/6714071.html>
